# java-filmorate
Template repository for Filmorate project.




![ –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö]()
# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥—Ä—É–∑—å—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìã –û–ø–∏—Å–∞–Ω–∏–µ
–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–∂–µ—Å–∫–∏–º–∏ —Å–≤—è–∑—è–º–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ —Å–∏—Å—Ç–µ–º–µ.

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `user_friends`
–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥—Ä—É–∂–µ—Å–∫–∏—Ö —Å–≤—è–∑—è—Ö –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

| –ü–æ–ª–µ | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|--------------|----------|
| user_id | INT | –î–∞ | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ—Ç–ø—Ä–∞–≤–∏–≤—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–∂–±—É |
| friend_id | INT | –î–∞ | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–ª—É—á–∏–≤—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å |
| is_confirmed | BOOLEAN | –î–∞ | –°—Ç–∞—Ç—É—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥—Ä—É–∂–±—ã |

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á: `(user_id, friend_id)`
- –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `users`

## üîç API –∑–∞–ø—Ä–æ—Å—ã

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ—Ö –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**SQL –∑–∞–ø—Ä–æ—Å:**
```sql
SELECT u.*
FROM users u
JOIN user_friends uf ON u.user_id = uf.friend_id
WHERE uf.user_id = :userId
AND uf.is_confirmed = true;
```
### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∞
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–∂–±—É –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –µ–≥–æ —Å—Ç–∞—Ç—É—Å –Ω–∞ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π. 

**SQL –∑–∞–ø—Ä–æ—Å:**
```sql
INSERT INTO user_friends (user_id, friend_id, is_confirmed)
VALUES (:userId, :friendId, false)
ON CONFLICT (user_id, friend_id) DO UPDATE
SET is_confirmed = false;